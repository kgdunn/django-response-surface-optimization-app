{% load rsm_extras %}

<h2>{{ system.full_name }}</h2>
<p>{{system.description|safe|linebreaks}}


<hr>
<h2>The next experiment</h2>

<span class="rsm-error input-error">
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
<span>

<form action="{% url 'rsmapp:show_one_system' system.slug %}" method="post">
{% csrf_token %}
{% for item in input_set.all %}
    <p>
    <label for="{{item.slug}}">{{item.display_name}}</label>: &nbsp;
    {{item.units_prefix}}

    {% if item.ntype == "CON" %}
    <input type="text"
           name="{{item.slug}}"
           size="7"
           maxlength="7"
           placeholder="{{item.default_value|get_floatformat:item.n_decimals}}"
           {% if values %}
               value="{{ values|get_item:item.slug|floatformat:3 }}"
           {% endif %}
           id="{{item.slug}}"/>
    {% elif item.ntype == "CAT" %}
        {% for key, value in categoricals|dict_iteration:item.slug %}
            <input type="radio" name="{{item.slug}}" value="{{key}}">{{key}}
        {% endfor %}
    {% endif %}
           {{item.units_suffix}}

    <span id={{item.slug}}-error>{% if item.error_message%}
                                        ({{item.error_message}})
                                  {% endif %}
    </span>

{% endfor %}
<p><input type="submit" value="Run my experiment!" />
</form>

<hr>
<h2>Previous experiments run</h2>

<table width="100%">
<tr><td>{{plot_html|safe}}</td><td>Experiments here</td></tr>
</table>